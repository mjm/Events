<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Event Structure Reference</title>
    <link rel="stylesheet" type="text/css" href="../css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="../css/highlight.css" />
    <meta charset="utf-8">
    <script src="../js/jquery.min.js" defer></script>
    <script src="../js/jazzy.js" defer></script>
    
    <script src="../js/lunr.min.js" defer></script>
    <script src="../js/typeahead.jquery.js" defer></script>
    <script src="../js/jazzy.search.js" defer></script>
  </head>
  <body>

    <a name="//apple_ref/swift/Struct/Event" class="dashAnchor"></a>

    <a title="Event Structure Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="../index.html">
          Events Docs
        </a>
         (100% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="../search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/mjm/Events">
            <img class="header-icon" src="../img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="../index.html">Events Reference</a>
      <img class="carat" src="../img/carat.png" />
      Event Structure Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Using%20Events.html">Using Events</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/EventBuilder.html">EventBuilder</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/Event.html">Event</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Structs/Event.html#/s:6Events5EventV3KeyV">– Key</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Destinations.html">Destinations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/EventSink.html">EventSink</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/OSLogEventSink.html">OSLogEventSink</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content">
            <h1>Event</h1>
              <div class="declaration">
                <div class="language">
                  <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">Event</span> <span class="p">:</span> <span class="kt">Encodable</span></code></pre>

                </div>
              </div>
            <p>An Event structure holds the information for a complete loggable event in your application.</p>

<p>You are not expected to construct an <code>Event</code> yourself. Instead, use an <code><a href="../Structs/EventBuilder.html">EventBuilder</a></code> to set up your events. When you
tell the event builder to send the event, it creates an <code>Event</code> for you and sends it to the event sink.</p>

<p>The only way to access the data in an <code>Event</code> is by using an encoder to encode it.</p>

<p><code>Event</code> also includes some static properties that serve a few purposes:</p>

<ul>
<li>Provide some special <code><a href="../Structs/EventBuilder.html">EventBuilder</a></code>s: <code>current</code> and <code>global</code>.</li>
<li>Allow configuring the behavior of events.</li>
</ul>

          </div>
        </section>

        <section class="section">
          <div class="section-content">
            <div class="task-group">
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:6Events5EventV6encode2toys7Encoder_p_tKF"></a>
                    <a name="//apple_ref/swift/Method/encode(to:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:6Events5EventV6encode2toys7Encoder_p_tKF">encode(to:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Encodes the data in the event to an <code>Encoder</code>.</p>

<p>For encoders that care about the order of keys that are encoded, events encode fields in the following order:</p>

<ul>
<li><code>Event.Key.error</code>, if present</li>
<li><code>Event.Key.message</code></li>
<li><p>Any app-specific custom keys, sorted alphabetically.</p></li>
</ul>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">encode</span><span class="p">(</span><span class="n">to</span> <span class="nv">encoder</span><span class="p">:</span> <span class="kt">Encoder</span><span class="p">)</span> <span class="k">throws</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>encoder</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>The encoder to use to encode the event data.</p>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:6Events5EventV6globalAA0B7BuilderVvpZ"></a>
                    <a name="//apple_ref/swift/Variable/global" class="dashAnchor"></a>
                    <a class="token" href="#/s:6Events5EventV6globalAA0B7BuilderVvpZ">global</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>An event builder for fields that will be added to all future events.</p>

<p>The global event builder is not meant to be sent. Instead, any fields you include here will be automatically included when sending future
events.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">static</span> <span class="k">var</span> <span class="nv">global</span><span class="p">:</span> <span class="kt"><a href="../Structs/EventBuilder.html">EventBuilder</a></span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:6Events5EventV7currentAA0B7BuilderVvpZ"></a>
                    <a name="//apple_ref/swift/Variable/current" class="dashAnchor"></a>
                    <a class="token" href="#/s:6Events5EventV7currentAA0B7BuilderVvpZ">current</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>The event that is currently in progress.</p>

<p>In most cases, this is the event that your app should be adding fields to. This allows uncoupled parts of your app to add relevant information
to the current event without knowing who started it or when it will be sent.</p>

<p>The current event is the same throughout the entire app, so if you are performing background or concurrent tasks, you may want to avoid the
current event for those and explicitly create and pass around an <code><a href="../Structs/EventBuilder.html">EventBuilder</a></code>.</p>

<p><code><a href="../Structs/EventBuilder.html">EventBuilder</a></code> is a value type, so all changes to the current event should be made directly on this property, rather than trying to store the
current event somewhere else.</p>
<pre class="highlight swift"><code><span class="c1">// good</span>
<span class="kt">Event</span><span class="o">.</span><span class="n">current</span><span class="p">[</span><span class="o">.</span><span class="n">myField</span><span class="p">]</span> <span class="o">=</span> <span class="s">"foo"</span>

<span class="c1">// bad</span>
<span class="k">var</span> <span class="nv">event</span> <span class="o">=</span> <span class="kt">Event</span><span class="o">.</span><span class="n">current</span>
<span class="n">event</span><span class="p">[</span><span class="o">.</span><span class="n">myField</span><span class="p">]</span> <span class="o">=</span> <span class="s">"foo"</span>
</code></pre>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">static</span> <span class="k">var</span> <span class="nv">current</span><span class="p">:</span> <span class="kt"><a href="../Structs/EventBuilder.html">EventBuilder</a></span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:6Events5EventV3KeyV"></a>
                    <a name="//apple_ref/swift/Struct/Key" class="dashAnchor"></a>
                    <a class="token" href="#/s:6Events5EventV3KeyV">Key</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>A key identifier for the different fields you can add to events.</p>

<p>There are a few predefined keys for fields that will be handled automatically by the Events system, but most fields will be custom, defined by the
needs of your application. You can add custom keys in extensions of <code>Event.Key</code> in your app:</p>
<pre class="highlight swift"><code><span class="kd">extension</span> <span class="kt">Event</span><span class="o">.</span><span class="kt">Key</span> <span class="p">{</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">florbCount</span><span class="p">:</span> <span class="kt">Event</span><span class="o">.</span><span class="kt">Key</span> <span class="o">=</span> <span class="s">"florb_count"</span>
<span class="p">}</span>
</code></pre>

<p>Then you can use this key to set fields on events in your app:</p>
<pre class="highlight swift"><code><span class="kt">Event</span><span class="o">.</span><span class="n">current</span><span class="p">[</span><span class="o">.</span><span class="n">florbCount</span><span class="p">]</span> <span class="o">=</span> <span class="n">florbs</span><span class="o">.</span><span class="n">count</span>
</code></pre>

<p>The string literal you assign for the key will be the key used for the field when encoding the event.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">Key</span> <span class="p">:</span> <span class="kt">Hashable</span><span class="p">,</span> <span class="kt">CodingKey</span><span class="p">,</span> <span class="kt">ExpressibleByStringLiteral</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:6Events5EventV4sinkAA0B4Sink_pvpZ"></a>
                    <a name="//apple_ref/swift/Variable/sink" class="dashAnchor"></a>
                    <a class="token" href="#/s:6Events5EventV4sinkAA0B4Sink_pvpZ">sink</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>The default event sink for events in your application.</p>

<p>New <code><a href="../Structs/EventBuilder.html">EventBuilder</a></code>s will use this sink to send their events if no sink is passed in explicitly. In general, you probably don&rsquo;t want to worry about
keeping track of event sinks throughout your app, so when your app launches, you should set this to the sink you want to use.</p>

<p>The default sink sends events to the default <code>os_log</code> logger. It is recommended when using <code>os_log</code> to define a custom subsystem and category
specifically for logging your events. To do this, set this property to a custom instance of <code><a href="../Classes/OSLogEventSink.html">OSLogEventSink</a></code>:</p>
<pre class="highlight swift"><code><span class="kt">Event</span><span class="o">.</span><span class="n">sink</span> <span class="o">=</span> <span class="kt">OSLogEventSink</span><span class="p">(</span><span class="nv">subsystem</span><span class="p">:</span> <span class="s">"com.myapp.App"</span><span class="p">,</span> <span class="nv">category</span><span class="p">:</span> <span class="s">"events"</span><span class="p">)</span>
</code></pre>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">static</span> <span class="k">var</span> <span class="nv">sink</span><span class="p">:</span> <span class="kt"><a href="../Protocols/EventSink.html">EventSink</a></span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </section>

      </article>
    </div>
    <section class="footer">
      <p>&copy; 2019 <a class="link" href="https://www.mattmoriarity.com/" target="_blank" rel="external">Matt Moriarity</a>. All rights reserved. (Last updated: 2019-10-21)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.11.2</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
